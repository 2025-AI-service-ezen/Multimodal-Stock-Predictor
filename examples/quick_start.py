#!/usr/bin/env python3
"""
GTX 1080Ti ë©€í‹°ëª¨ë‹¬ ëª¨ë¸ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
ì´ˆë³´ìë„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ë‹¨ê³„ë³„ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

ì‹¤í–‰ ë°©ë²•:
    python examples/quick_start.py

ì‘ì„±ì: GTX 1080Ti ìµœì í™” íŒ€
ì—…ë°ì´íŠ¸: 2025-07-25
"""

import sys
import os
import numpy as np

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ Python ê²½ë¡œì— ì¶”ê°€
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from src.prediction import GTX1080TiPredictor


def main():
    """ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ ë©”ì¸ í•¨ìˆ˜"""
    
    print("=" * 60)
    print("  GTX 1080Ti ë©€í‹°ëª¨ë‹¬ ëª¨ë¸ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ")
    print("  ğŸš€ ì£¼ê°€ ë“±ë½ë¥  ì˜ˆì¸¡ ì‹œìŠ¤í…œ")
    print("=" * 60)
    
    try:
        # ===== 1ë‹¨ê³„: ì˜ˆì¸¡ê¸° ì´ˆê¸°í™” =====
        print("\n[1ë‹¨ê³„] ì˜ˆì¸¡ê¸° ì´ˆê¸°í™”...")
        predictor = GTX1080TiPredictor()
        
        # ===== 2ë‹¨ê³„: í™˜ê²½ ì„¤ì • =====
        print("\n[2ë‹¨ê³„] í™˜ê²½ ì„¤ì • ë° ëª¨ë¸ ë¡œë“œ...")
        if not predictor.setup_environment():
            print("âŒ í™˜ê²½ ì„¤ì • ì‹¤íŒ¨. ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:")
            print("  - í›ˆë ¨ëœ ëª¨ë¸ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸")
            print("  - GPU ë“œë¼ì´ë²„ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸")
            print("  - í•„ìš”í•œ Python íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸")
            return
        
        # ===== 3ë‹¨ê³„: ìƒ˜í”Œ ë°ì´í„° ìƒì„± =====
        print("\n[3ë‹¨ê³„] í…ŒìŠ¤íŠ¸ìš© ìƒ˜í”Œ ë°ì´í„° ìƒì„±...")
        
        # ë°ì´í„° í´ë” ìƒì„± í™•ì¸
        os.makedirs("./data/samples", exist_ok=True)
        
        # ìƒ˜í”Œ ë°ì´í„° ìƒì„± (ì˜ˆì¸¡ê¸°ì— ë§¤ì†Œë“œê°€ ìˆëŠ” ê²½ìš°)
        try:
            sample_file = "./data/samples/quick_start_sample.csv"
            # ê¸°ë³¸ ìƒ˜í”Œ ë°ì´í„° ìƒì„±
            print("â„¹ï¸ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì§ì ‘ ìƒì„±í•˜ê±°ë‚˜ ëª¨ë¸ ë°ëª¨ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”.")
            print("ğŸ“ python src/prediction.py ë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ ë°ëª¨ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.")
        except Exception as e:
            print(f"âš ï¸ ìƒ˜í”Œ ë°ì´í„° ìƒì„± ì‹¤íŒ¨: {e}")
        
        # ===== 4ë‹¨ê³„: ê°œë³„ ì˜ˆì¸¡ ì˜ˆì‹œ =====
        print("\n[4ë‹¨ê³„] ê°œë³„ ì˜ˆì¸¡ ìˆ˜í–‰...")
        print("-" * 40)
        
        # ì˜ˆì‹œ ê¸ˆìœµ ë°ì´í„° (5ì¼ê°„)
        financial_data = np.array([
            [50000, 49500, 50500, 49000, 1000000, 0.01],   # 1ì¼ì°¨
            [50500, 50000, 51000, 49800, 1100000, 0.01],   # 2ì¼ì°¨  
            [51000, 50500, 51500, 50200, 1050000, 0.01],   # 3ì¼ì°¨
            [51200, 51000, 51800, 50800, 980000, 0.004],   # 4ì¼ì°¨
            [51500, 51200, 52000, 51000, 1200000, 0.006]   # 5ì¼ì°¨
        ])
        
        # ì˜ˆì‹œ ë‰´ìŠ¤ í…ìŠ¤íŠ¸
        news_text = "ê¸°ì—… ì‹¤ì  ê°œì„  ì „ë§ ì£¼ê°€ ìƒìŠ¹ ê¸°ëŒ€ íˆ¬ìì ê´€ì‹¬ ì¦ê°€ ë§¤ì¶œ ì„±ì¥"
        
        print("ğŸ“Š ì…ë ¥ ë°ì´í„°:")
        print(f"  ğŸ’° ê¸ˆìœµ ë°ì´í„°: 5ì¼ê°„ OHLCV + ì „ì¼ë¹„")
        print(f"  ğŸ“° ë‰´ìŠ¤ í…ìŠ¤íŠ¸: '{news_text[:30]}...'")
        
        # ì˜ˆì¸¡ ìˆ˜í–‰
        try:
            result = predictor.predict(financial_data, news_text)
            
            if result:
                print(f"\nğŸ¯ ì˜ˆì¸¡ ê²°ê³¼:")
                print(f"  ğŸ“ˆ ì˜ˆì¸¡ ë“±ë½ë¥ : {result['predicted_return_percent']:+.2f}%")
                print(f"  ğŸ­ ë°©í–¥ì„±: {result['direction']}")
                print(f"  ğŸ“Š ì‹ ë¢°ë„: {result['confidence']}")
                
                if 'interpretation' in result:
                    print(f"\nğŸ’¡ í•´ì„:")
                    for interpretation in result['interpretation']:
                        print(f"  â€¢ {interpretation}")
            else:
                print("âŒ ì˜ˆì¸¡ ì‹¤íŒ¨")
        except Exception as e:
            print(f"âŒ ì˜ˆì¸¡ ì˜¤ë¥˜: {e}")
        
        print("\nğŸ‰ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ ì™„ë£Œ!")
        print("ğŸ“š ë” ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.mdë¥¼ ì°¸ê³ í•˜ì„¸ìš”.")
        
    except Exception as e:
        print(f"âŒ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {e}")
        print("ğŸ”§ ë‹¤ìŒì„ í™•ì¸í•´ì£¼ì„¸ìš”:")
        print("  1. ëª¨ë“  ì˜ì¡´ì„±ì´ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ (pip install -r requirements.txt)")
        print("  2. GPU ë“œë¼ì´ë²„ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€")
        print("  3. Python ë²„ì „ì´ 3.8 ì´ìƒì¸ì§€")


if __name__ == "__main__":
    main()